# AWS ElasticCache æ“ä½œæŒ‡å—

## ç›®éŒ„
- [æŸ¥è©¢ Domain](#æŸ¥è©¢-domain)
- [AWS Console è³‡è¨Š](#aws-console-è³‡è¨Š)
- [Client é€£ç·š](#client-é€£ç·š)
- [CLI é€£ç·š](#cli-é€£ç·š)

<br><br>

---

## æŸ¥è©¢ Domain

â˜˜ï¸ **æŸ¥ domain**

<br>

æŒ‡ä»¤ `nslookup output-cache-redis.hk.91app.io`

<br>

**æŸ¥è©¢æˆåŠŸæ™‚**ï¼š

<br>

âœ… æœ‰å›æ‡‰å°æ‡‰çš„ç§æœ‰ IPï¼ˆ10.32.110.169ï¼‰

<br>

âœ… å¾ .cache.amazonaws.com å¯çœ‹å‡ºæ˜¯ AWS è¨—ç®¡çš„ Redis å¯¦ä¾‹

<br>

âœ… å› ç‚ºä½ èƒ½æŸ¥å‡º AWS ç§æœ‰ç¶²åŸŸçš„è§£æç´€éŒ„ï¼Œä»£è¡¨ä½ ç›®å‰è™•æ–¼ EC2 æˆ– VPN å…§ç¶²

<br>

- Non-authoritative answer æ˜¯æ­£å¸¸çš„ï¼Œè¡¨ç¤ºé€™ä¸æ˜¯åŸå§‹ DNS zone å›æ‡‰ï¼Œè€Œæ˜¯é€éå¿«å–æˆ–è½‰é€å¾—ä¾†çš„çµæœã€‚
- Aliases è¡¨ç¤ºæœ‰ç¶“éå¤šå±¤ CNAME æŒ‡å‘ã€‚

<br>

![alt text](../Img/image-els-domain.png)

<br><br>

---

## AWS Console è³‡è¨Š

![alt text](../Img/els_awsConsole.png)

<br>

| é …ç›® | èªªæ˜ |
|------|------|
| Cluster name | hk-output-cache-redis-1ï¼Œæ˜¯ä½ é€™å€‹ Redis Cluster çš„åç¨± |
| Description | å‚™è¨»èªªæ˜ï¼šWebstore output-cache, 20250520 createï¼Œè¡¨ç¤ºç”¨é€”æ˜¯ output cacheï¼Œå»ºç«‹æ–¼ 2025/05/20 |

<br>

ğŸ”¹ **æ ¸å¿ƒè¨­å®š**

<br>

| é …ç›® | èªªæ˜ |
|------|------|
| Engine | ä½¿ç”¨ Redis å¼•æ“ |
| Engine version | 6.2.6ï¼Œæ˜¯ Redis çš„ç‰ˆæœ¬ |
| Node type | cache.m7g.largeï¼Œæ˜¯ AWS ElastiCache çš„å¯¦ä¾‹å‹åˆ¥ï¼Œä»£è¡¨æ¯å€‹ç¯€é»ä½¿ç”¨ ARM æ¶æ§‹çš„ä¸­å‹æ©Ÿç¨®ï¼ˆGravitonï¼‰ |
| Number of nodes | 2ï¼Œä»£è¡¨é€™å€‹å¢é›†æœ‰å…©å€‹ç¯€é»ï¼ˆä¸» + å‚™ï¼‰ |
| Multi-AZ | Enabledï¼Œä»£è¡¨ä¸»å¾ç¯€é»åˆ†å¸ƒåœ¨ä¸åŒå¯ç”¨å€ï¼ˆAvailability Zoneï¼‰ä»¥ç¢ºä¿é«˜å¯ç”¨æ€§ |
| Auto-failover | Enabledï¼Œä»£è¡¨ç•¶ä¸»ç¯€é»æ›æ‰æ™‚ï¼Œå‚™æ´ç¯€é»æœƒè‡ªå‹•æ¥æ‰‹ |
| Shards | 1ï¼Œè¡¨ç¤ºæ˜¯å–®ä¸€è³‡æ–™åˆ†ç‰‡ï¼ˆæ²’åšæ°´å¹³åˆ‡åˆ†ï¼‰ |

<br>

ğŸ”¹ **å®‰å…¨æ€§èˆ‡è³‡æ–™ç®¡ç†**

<br>

| é …ç›® | èªªæ˜ |
|------|------|
| Encryption at rest | Disabledï¼Œéœæ…‹åŠ å¯†æ²’é–‹ï¼ˆè³‡æ–™å„²å­˜åœ¨ç£ç¢Ÿä¸Šä¸åŠ å¯†ï¼‰ |
| Encryption in transit | Disabledï¼Œå‚³è¼¸åŠ å¯†ä¹Ÿæ²’é–‹ï¼ˆRedis Client èˆ‡ Server ä¹‹é–“æ˜¯æ˜æ–‡é€£ç·šï¼‰ |
| Parameter group | default.redis6.xï¼Œä½¿ç”¨é è¨­åƒæ•¸ç¾¤çµ„ï¼Œæœªåšè‡ªå®šç¾©å„ªåŒ– |
| Data tiering | Disabledï¼Œæœªä½¿ç”¨åˆ†å±¤å„²å­˜ï¼ˆé€šå¸¸æ˜¯ R6gd ç¯€é»æ”¯æ´ï¼‰ |
| Cluster mode | Disabledï¼Œæœªé–‹å•Ÿ cluster åˆ†ç‰‡æ¨¡å¼ï¼ˆæ‰€ä»¥æ˜¯é cluster æ¨¡å¼ï¼‰ |

<br>

ğŸ”¹ **é€£ç·šè³‡è¨Š**

<br>

| é …ç›® | èªªæ˜ |
|------|------|
| Primary endpoint | hk-output-cache-redis-1.ql9kn1...cache.amazonaws.com:6379ï¼Œä¸»ç¯€é»é€£ç·šä½ç½®èˆ‡ portï¼ˆ6379 æ˜¯ Redis é è¨­ portï¼‰ |
| Reader endpoint | æä¾›è®€å–æµé‡ä½¿ç”¨ï¼ˆåªè®€ç¯€é»ï¼‰ï¼Œå¯åšè®€å¯«åˆ†é›¢ |

<br>

ğŸ”¹ **ç‹€æ…‹èˆ‡ç®¡ç†**

<br>

| é …ç›® | èªªæ˜ |
|------|------|
| Status | Availableï¼Œè¡¨ç¤ºç›®å‰é‹ä½œæ­£å¸¸ |
| Data migration | No active migrationsï¼Œç›®å‰æ²’æœ‰é€²è¡Œè³‡æ–™é·ç§» |

<br><br>

---

## Client é€£ç·š

æŒ‡ä»¤ > `client list`

<br>

![alt text](../Img/els_client.png)

<br>

**Redis é€£ç·šæ¬„ä½èªªæ˜**

ä»¥ä¸‹æ˜¯ Redis client é€£ç·šçš„å„é …æ¬„ä½èªªæ˜ï¼Œå¸¸ç”¨æ–¼è¨ºæ–·ã€ç›£æ§èˆ‡ç®¡ç† Redis é€£ç·šç‹€æ³ï¼š

<br>

ğŸ”¹ **id=801**

èªªæ˜ï¼šæ­¤é€£ç·šçš„ Redis client ID

<br>

ç”¨é€”ï¼šå”¯ä¸€æ¨™è­˜ä¸€å€‹é€£ç·šï¼Œå¯ç”¨æ–¼è¿½è¹¤æˆ–å¼·åˆ¶æ–·ç·šï¼ˆCLIENT KILL IDï¼‰

<br>

ğŸ”¹ **addr=10.1.11.60:57475**

èªªæ˜ï¼šä¾†æº client çš„ IP å’Œ port

<br>

ç”¨é€”ï¼šä»£è¡¨é€™å°ä¸»æ©Ÿæ˜¯ä¸»å‹•é€£ Redis çš„ client ç«¯ï¼ˆå³èª°ç™¼èµ·é€£ç·šï¼‰

<br>

ğŸ”¹ **laddr=10.1.110.130:6379**

èªªæ˜ï¼šRedis å¯¦ä¾‹çš„ IP å’Œ port

<br>

ç”¨é€”ï¼šä»£è¡¨ Redis æ‰€åœ¨ä¸»æ©Ÿçš„æ¥æ”¶ç«¯ï¼Œé€™æ˜¯ Redis æ‰€ç›£è½çš„åœ°å€èˆ‡åŸ 

<br>

ğŸ”¹ **fd=21**

èªªæ˜ï¼šæª”æ¡ˆæè¿°å™¨ï¼ˆfile descriptorï¼‰

<br>

ç”¨é€”ï¼šå°æ‡‰åˆ°ç³»çµ±å±¤ç´šçš„é€£ç·šç·¨è™Ÿï¼Œå¯ç”¨æ–¼ä½å±¤ç´šé™¤éŒ¯

<br>

ğŸ”¹ **name=SG-MY-MWEB1**

èªªæ˜ï¼šä½¿ç”¨è€…è‡ªè¨‚çš„é€£ç·šåç¨±

<br>

ç”¨é€”ï¼šé€é CLIENT SETNAME è¨­å®šï¼Œæ–¹ä¾¿è¾¨è­˜é€£ç·šç”¨é€”æˆ–ä¾†æºæœå‹™ âœ”ï¸

<br>

ğŸ”¹ **ageã€idleã€flags**

èªªæ˜ï¼š

- ageï¼šé€£ç·šå­˜æ´»æ™‚é–“ï¼ˆç§’ï¼‰
- idleï¼šé€£ç·šé–’ç½®æ™‚é–“ï¼ˆç§’ï¼‰
- flagsï¼šé€£ç·šå±¬æ€§æ¨™èªŒï¼ˆå¦‚ N=normalã€x=å¯è¢«é—œé–‰ ç­‰ï¼‰

<br>

ç”¨é€”ï¼šå”åŠ©åˆ¤æ–·é€£ç·šæ˜¯å¦ç•°å¸¸æˆ–é–’ç½®éä¹…ï¼Œå¸¸ç”¨æ–¼é€£ç·šç®¡ç†èˆ‡é™¤éŒ¯

<br>

ğŸ”¹ **cmd**

èªªæ˜ï¼šæ­¤ client æœ€è¿‘ä¸€æ¬¡åŸ·è¡Œçš„ Redis å‘½ä»¤

<br>

ç”¨é€”ï¼šè§€å¯Ÿæ­£åœ¨åŸ·è¡Œçš„æ“ä½œï¼Œå¦‚ subscribeã€pingã€client ç­‰ï¼Œå¯åˆ¤æ–·æ˜¯å¦ç‚ºé•·é€£ç·šæˆ–ç¹å¿™æŒ‡ä»¤

<br><br>

---

## CLI é€£ç·š

```bash
redis-cli -h <your-redis-endpoint> -p 6379
```



